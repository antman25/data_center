node()
{
    def build_branch = params.getOrDefault("BUILD_BRANCH","main")

	stage("Git Checkout")
	{
		checkout([$class: 'GitSCM', branches: [[name: '*/main']], extensions: [], userRemoteConfigs: [[credentialsId: 'jenkins_ssh', url: 'http://gitlab.antlinux.local:30080/antman/data_center.git']]])
	}

	stage ("ENV dump")
	{
	    sh('env | sort -n')
	    //print(env.getEnvironment())
	    print(params)
	}


	stage("Branch Test")
	{
	    echo "Trigger Branch: ${build_branch}"
	}
	

	properties([ 	disableConcurrentBuilds(), 
			gitLabConnection(gitLabConnection: 'gitlab1', jobCredentialId: ''),
			parameters([string(defaultValue: 'main', name: 'BUILD_BRANCH')])
			])
}
